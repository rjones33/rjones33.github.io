<!DOCTYPE HTML>
<html>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<body>
    <span id="temp"></span><br>
    <span id="tstamp"></span><br>
	<br>
	<span id="curr_button"></span><br>
	<br>
	<span id="curr_page"></span><br>
	<br>
    <button id="connectbutton" onclick="start()">Get Tank Level</button>

    <script type="text/javascript">
	var d = new Date();
    var curr_date = d.getDate();
    var curr_month = d.getMonth() + 1; //Months are zero based
    var curr_year = d.getFullYear();
    var curr_hour = d.getHours();
    var curr_min = d.getMinutes();
    var curr_sec = d.getSeconds();

    function start(objButton) {

        document.getElementById("temp").innerHTML = "Waiting for data...";
        document.getElementById("tstamp").innerHTML ="tstamp";
        
		var deviceID = "2e0025000f47343432313031";
        var accessToken = "089182e41784dc0366f0e8dea2ffca53b88e1821";
        var varName = "varTankLevel";

        requestURL = "https://api.spark.io/v1/devices/" + deviceID + "/" + varName + "/?access_token=" + accessToken;
        $.getJSON(requestURL, function(json) {
                 document.getElementById("temp").innerHTML = "Tank Level " + json.result.toFixed(2) + " inches";
                 document.getElementById("temp").style.fontSize = "28px";
                 document.getElementById("tstamp").innerHTML = "Last Timestamp From Photon -- " + json.coreInfo.last_heard;
				 document.getElementById("curr_button").innerHTML = "Local Refresh Time: " + curr_month + "-" + curr_date + "-" + curr_year + " " + curr_hour + ":" + curr_min + ":" + curr_sec;
                 });
    }
	document.getElementById("curr_page").innerHTML = "Page Load Time: " + curr_month + "-" + curr_date + "-" + curr_year + " " + curr_hour + ":" + curr_min + ":" + curr_sec;
    </script>
</body>
</html>
